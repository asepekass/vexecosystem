ScatterJS.plugins(Vexanium());var account,fromDappBrowser="VexWalletAndroid"==navigator.userAgent,appname=document.title,network=ScatterJS.Network.fromJson({blockchain:bc("vex"),chainId:"f9f432b1851b5c179d2091a96f593aaed50ec7466b74f89301f957a83e56ce1f",host:"209.97.162.124",port:8080,protocol:"http"});let balance="",net="",cpu="",dots=0;$(".eye").text("|"),setTimeout(function(){connect()},1e3),$("#ufo").on("click touch",function(){$(this).toggleClass("flying"),$(this).toggleClass("caught")}),$("#login").on("click touch",function(){connect()});function zero(){balance=balance,$("#dots").text("."),dots=0}function loading(){6>dots&&($("#dots").append("."),dots++)}function sleepy(){$(".tog").addClass("d-none"),$("#login,#eyes").removeClass("d-none"),$("#login").prop("disabled",!1),$(".eye").text("X"),$("#intro").text("Welcome")}function connect(){$(".tog").addClass("d-none"),$("#dots,#login").removeClass("d-none"),$("#login").prop("disabled",!0),zero();try{fromDappBrowser?pe.getWalletWithAccount().then(a=>a?void(account=a.data.account,onConnected()):void notConnected()):ScatterJS.connect(appname,{network}).then(a=>a?void login():(alert("Please login Vexwallet"),void notConnected()))}catch(a){console.log(a)}}function notConnected(){$(".tog").addClass("d-none"),$("#login,#nopen").removeClass("d-none"),setTimeout(sleepy,500)}function login(){try{ScatterJS.login().then(a=>{a&&(account=a.accounts[0].name,onConnected())})}catch(a){console.log(a)}}function onConnected(){$(".tog").addClass("d-none"),$("#gotin,#logout").removeClass("d-none"),$("#yourBp").text(account),$("#mybalance").text(balance),$("#balance").text(balance),$("#logout").on("click touch",function(){logout()}),getinfo(account)}function getinfo(){try{const a=VexNet(network);a.getAccount(account).then(a=>{net=a.self_delegated_bandwidth.net_weight?a.self_delegated_bandwidth.net_weight:net,cpu=a.self_delegated_bandwidth.cpu_weight?a.self_delegated_bandwidth.cpu_weight:cpu,balance=a.core_liquid_balance?a.core_liquid_balance:balance,setTimeout(function(){$("#user").text(account),$("#bidder").text(account),$("#mybalance").text(balance),$("#balance").text(balance),$("#stakebalance").text(balance),$("#netstake").text(net),$("#cpustake").text(cpu)},500)})}catch(a){console.log(a)}}function logout(){try{fromDappBrowser||ScatterJS.logout(),sleepy(),$("#user").text("please login again"),$("#stakebalance").text("please login again"),$("#cpustake").text("please login again"),$("#netstake").text("please login again"),$("#yourBp").text("please login again"),$("#mybalance").text("please login again"),$("#balance").text("please login again"),$("#bidder").text("please login again")}catch(a){console.log(a)}}$("#claimButton").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!!account){var a=account.name,c=`${account.name}@${account.authority}`,d=VexNet(network),e=$("#produrl").val(),f=$("#prodpubkey").val();d.contract("vexcore").then(b=>b.regproducer({producer:a,producer_key:f,url:e,location:0},{authorization:c})).then(function(){alert("Your BP registered")}).catch(function(a){alert(a)})}})})}),$("#unreg").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!!account){var a=account.name,c=`${account.name}@${account.authority}`,d=VexNet(network);d.contract("vexcore").then(b=>b.unregprod({producer:a},{authorization:c})).then(function(){alert("Your BP unregistered")}).catch(function(a){alert(a)})}})})}),$("#claim").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!!account){var a=account.name,c=`${account.name}@${account.authority}`,d=VexNet(network);d.contract("vexcore").then(b=>b.claimrewards({owner:a},{authorization:c})).then(function(){alert("Your reward BP claimed")}).catch(function(a){alert(a)})}})})}),$("#bid").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!!account){var a=account.name,c=`${account.name}@${account.authority}`,d=$("#newname").val(),e=$("#bidprice").val(),f=VexNet(network);f.contract("vexcore").then(b=>b.bidname({bidder:a,newname:d,bid:e+" VEX"},{authorization:c})).then(function(){alert("Bidname Success"),connect()}).catch(function(a){alert(a)})}})})}),$("#transferButton").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!account)return;var a=account.name,c=`${account.name}@${account.authority}`;const d=$("#transTo").val(),e=$("#transAmount").val();const f=$("#transMemo").val();var g=VexNet(network);g.contract("vex.token").then(b=>b.transfer({from:a,to:d,quantity:e+" VEX",memo:f},{authorization:c})).then(function(){alert("Transfer Success"),connect()}).catch(function(a){alert(a)})})})}),$("#vexplorer").click(function(){var a=account.name;openLink("https://explorer.vexanium.com/account/"+a,"_blank")}),$("#stakeButton").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!account)return;var a=account.name,c=`${account.name}@${account.authority}`;const d=$("#stakecpu").val(),e=$("#stakenet").val();var f=VexNet(network);f.contract("vexcore").then(b=>b.delegatebw({from:a,receiver:a,stake_net_quantity:e+" VEX",stake_cpu_quantity:d+" VEX",transfer:0},{authorization:c})).then(function(){alert("Stake VEX Success"),connect()}).catch(function(a){alert(a)})})})}),$("#unstakeButton").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!account)return;var a=account.name,c=`${account.name}@${account.authority}`;const d=$("#unstakecpu").val(),e=$("#unstakenet").val();var f=VexNet(network);f.contract("vexcore").then(b=>b.undelegatebw({from:a,receiver:a,unstake_net_quantity:e+" VEX",unstake_cpu_quantity:d+" VEX"},{authorization:c})).then(function(){alert("Unstake VEX Success"),connect()}).catch(function(a){alert(a)})})})}),$("#voteprod").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!account)return;var a=account.name,c=`${account.name}@${account.authority}`;const d=$("#producerName").val();var e=VexNet(network);e.contract("vexcore").then(b=>b.voteproducer({voter:a,proxy:"",producers:[d]},{authorization:c})).then(function(){alert("Vote BP "+d+" Success")}).catch(function(a){alert(a)})})})}),$("#voteprox").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!account)return;var a=account.name,c=`${account.name}@${account.authority}`;const d=$("#proxyName").val();var e=VexNet(network);e.contract("vexcore").then(b=>b.voteproducer({voter:a,proxy:d,producers:[]},{authorization:c})).then(function(){alert("Vote BP "+d+" Success")}).catch(function(a){alert(a)})})})}),$("#konfirmasiVote").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!!account){var a=account.name,c=`${account.name}@${account.authority}`,d=VexNet(network);d.contract("vexcore").then(b=>b.voteproducer({voter:a,proxy:"",producers:["ekasepbanjar"]},{authorization:c})).then(function(){alert("Vote BP ekasepbanjar Success")}).catch(function(a){alert(a)})}})})}),$("#konfirmasiDonate").click(function(){window.ScatterJS.scatter.connect(appname).then(a=>{if(!a)return!1;window.ScatterJS.plugins(new window.ScatterEOS);var b=window.ScatterJS.scatter;b.getIdentity({accounts:[network]}).then(()=>{if(account=b.identity.accounts.find(a=>"eos"===a.blockchain),!!account){var a=account.name,c=`${account.name}@${account.authority}`,d=$("#donateamount").val(),e=VexNet(network);e.contract("vex.token").then(b=>b.transfer({from:a,to:"ekasepbanjar",quantity:d+" VEX",memo:"Donate for support DApp Vex Ecosystem"},{authorization:c})).then(function(){alert("Transfer Success"),connect()}).catch(function(a){alert(a)})}})})});
